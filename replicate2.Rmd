---
title: "replication2"
author: "Nick F & Aaron K"
date: "March 12, 2015"
output: html_document
---

```{r echo = FALSE}
suppressPackageStartupMessages(require(dplyr))
suppressPackageStartupMessages(require(tidyr))
suppressPackageStartupMessages(require(broom))
suppressPackageStartupMessages(require(ggplot2))

Sem <- function(x) {
  #creates the function to calculate standard error of the mean
  sqrt(var(x)/length(x))
  }

# detect the user's directory:
directory  <- "C:/Users/Nick/Documents/Github/scarcityvalueRep/framing"
if (Sys.getenv('USER')=="air") directory <- "~/Dropbox/SOC504/replicate"
setwd(directory)

```



*AK: I'll work backwards 6,5,4,3,2d*
*Note: headlines were added to some sheets, i.e. assumptions made*

---

#### Study 2d : incomplete
> In Study 2d, there were 301 participants (mean age = 30.2 years; 120 females, 181 males; median household size = 3 people; median household income = $25,000).

```{r echo=F}
# Read data in
df2d_1 <- read.csv("csv_files/2d_Sheet1.csv", header=T)
df2d_2 <- read.csv("csv_files/2d_Sheet2.csv", header=T)
```

```{r}
# Number of subjects
df2d_1 %>%
  select(subject) %>%
  summarise(n())

# Mean age
df2d_2 %>%
  summarise(mean(age, na.rm=T)) %>%
  round(digits=1)

# Number of females vs. males
df2d_2 %>%
  group_by(gender) %>%
  summarise(n())

# Median Household Size
# calculated using income2 : doesn't match
df2d_1 %>%
  summarize(median(inc2, na.rm=T))
# calculated using ses : doesn't match
df2d_1 %>%
  summarize(median(ses, na.rm=T)) %>%
  round(digits=0)
# calculated using income (converted) then inverted : matches!
df2d_1 %>%
  summarize(median(income, na.rm=T))
df2d_1 %>%
  select(inc2) %>%
  distinct() %>%
  arrange(inc2) %>%
  slice(3) # '3' derived from above
# Note above: I tried to, but couldn't figure out how to use a variable instead of explicitly using the value 3. Again, I suspected the median was taken from the categorized income and then backward matched to its raw value. I suspect this is erroneous and probably due to disregarding the categorical value of 0 is meaningful.

```
> Results: No participants were excluded from analyses. We regressed willingness to travel on income (categorized by a median split), proportional size of the discount (large vs. small), absolute size of the discount ($10 vs. $150), all two-way interaction terms, and the three-way interaction term. Higher-income participants were sig- nificantly more willing to travel for a proportionally larger discount (60%) than for a proportionally smaller discount (41%), but this was not true for lower-income participants (50% vs. 61%). The interaction between pro- portional discount and income was significant, β = −1.90, Wald-test χ2(1, N = 301) = 4.11, p < .05. Note that this interaction did not depend on the absolute amount of the discount, as the three-way interaction was not sig- nificant, β = −0.89, Wald-test χ2(1, N = 301) = 0.28, p > .6. When income was treated continuously, the interaction between proportional discount and income also emerged, but was not significant, β = −2.13, Wald-test χ2(1, N = 301) = 2.21, p < .15. These results replicate an earlier study by Hall (2008), who documented similar effects among participants recruited in a soup kitchen versus a wealthy suburb.
```{r}

```

---

#### Study 6 : incomplete
> In Study 6, 74 participants (mean age = 32.0 years; 46 females, 28 males) were...

```{r echo=F}
df.6.demo <- read.csv("csv_files/6_demo.csv", header=T)
df.6.raw <- read.csv("csv_files/6_raw.csv", header=T)

# Number of subjects
df.6.demo %>%
  select(Subject) %>%
  summarise(n())

# Mean age
df.6.demo %>%
  summarise(mean(Age, na.rm=T))

# Number of females vs. males
df.6.demo %>%
  group_by(Gender) %>%
  summarise(n())
```

> One participant was excluded because of a computer malfunction during the game. Time-rich participants rated the loss as more expensive when they thought about a small account (M = 8.31, 95% CI = [7.78, 8.84]) than when they thought about a large account (M = 6.50, 95% CI = [5.42, 7.58]), whereas time-poor participants’ evaluations did not differ between the small-account condition (M = 8.33, 95% CI = [7.14, 9.52]) and the large- account condition (M = 8.83, 95% CI = [7.97, 9.69]). A 2 (scarcity condition) × 2 (account condition) analysis of variance revealed a significant interaction, F(1, 69) = 5.16, p < .05, ηp2 = .07.

```{r}
# Number of subjects, filter our Subject 16 (deduced from spss filter)
df.6.edit <- df.6.raw %>%
  filter(Subject!='16')
df.6.edit %>%
   summarise(n_distinct(Subject)) 

# Total points per Subject
df.6.edit <- df.6.edit %>%
  group_by(Subject) %>%
  mutate(Total.Points=sum(Points)) %>%
  select(Subject, Cond, Total.Points) %>%
  distinct()

# Change variable to factos
df.6.edit$Subject <- as.factor(df.6.edit$Subject)
df.6.edit$Cond <- as.factor(df.6.edit$Cond)

# Add columns for different conditions: scarcity/account 

```

